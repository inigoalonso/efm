<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EF-M Tool</title>
    <base target="_self">
    <meta name="description" content="This is a test" />
    <meta name="google" value="notranslate">


    <!--stylesheets / link tags loaded here-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />

    <style type="text/css">
        html,
        body {
            height: 100%;
        }

        body {
            min-height: 100vh;
        }

        /* fixed and fluid only on sm and up */
        @media (min-width: 768px) {
            .fixed {
                flex: 0 0 200px;
                min-height: 100vh;
                min-width: 240px;
            }

            .col .fluid {
                min-height: 100vh;
            }

            .flex-grow {
                flex: 1;
            }
        }
    </style>
    <!-- Sets the basepath for the library if not in same directory -->
    <script type="text/javascript">
        mxBasePath = 'https://jgraph.github.io/mxgraph/javascript/src';
    </script>

    <!-- Loads and initializes the library -->
    <script type="text/javascript" src="https://jgraph.github.io/mxgraph/javascript/src/js/mxClient.js"></script>

    <!-- Code -->
    <script type="text/javascript">
        // Program starts here. Creates a sample graph in the
        // DOM node with the specified ID. This function is invoked
        // from the onLoad event handler of the document (see below).
        function main(graphContainer) {
            // Checks if browser is supported
            if (!mxClient.isBrowserSupported()) {
                // Displays an error message if the browser is
                // not supported.
                mxUtils.error('Browser is not supported!', 200, false);
            } else {
                // Defines an icon for creating new connections in the connection handler.
                // This will automatically disable the highlighting of the source vertex.
                mxConnectionHandler.prototype.connectImage = new mxImage(
                    'assets/img/connector.gif', 16, 16);

                // Creates the div for the toolbar
                var tbContainer = document.createElement('div');
                tbContainer.style.position = 'absolute';
                tbContainer.style.overflow = 'hidden';
                tbContainer.style.padding = '2px';
                tbContainer.style.left = '0px';
                tbContainer.style.top = '0px';
                tbContainer.style.width = '24px';
                tbContainer.style.bottom = '0px';

                document.getElementById("graphContainer").appendChild(tbContainer);

                // Creates new toolbar without event processing
                var toolbar = new mxToolbar(tbContainer);
                toolbar.enabled = false

                // Creates the div for the graph
                var container = document.createElement('div');
                container.style.position = 'absolute';
                container.style.overflow = 'hidden';
                container.style.left = '24px';
                container.style.top = '0px';
                container.style.right = '0px';
                container.style.bottom = '0px';
                container.style.background = 'url("assets/img/grid.gif")';

                document.getElementById("graphContainer").appendChild(container);

                // Workaround for Internet Explorer ignoring certain styles
                if (mxClient.IS_QUIRKS) {
                    document.body.style.overflow = 'hidden';
                    new mxDivResizer(tbContainer);
                    new mxDivResizer(container);
                }

                // Creates the model and the graph inside the container
                // using the fastest rendering available on the browser
                var model = new mxGraphModel();
                var graph = new mxGraph(container, model);

                // Optional disabling of sizing
                graph.setCellsResizable(false);

                // Enables new connections in the graph
                graph.setConnectable(true);
                graph.setMultigraph(false);

                // Stops editing on enter or escape keypress
                var keyHandler = new mxKeyHandler(graph);
                var rubberband = new mxRubberband(graph);

                var addVertex = function (icon, w, h, style) {
                    var vertex = new mxCell(null, new mxGeometry(0, 0, w, h), style);
                    vertex.setVertex(true);

                    var img = addToolbarItem(graph, toolbar, vertex, icon);
                    img.enabled = true;

                    graph.getSelectionModel().addListener(mxEvent.CHANGE, function () {
                        var tmp = graph.isSelectionEmpty();
                        mxUtils.setOpacity(img, (tmp) ? 100 : 20);
                        img.enabled = tmp;
                    });
                };

                addVertex('assets/img/rectangle.gif', 100, 60, 'rounded=0;fillColor=#FFF26D;strokeColor=#FFC928');
                addVertex('assets/img/rounded.gif', 100, 60, 'rounded=1;fillColor=#4286F4;strokeColor=#2E6CD1');

                // Adds an option to view the XML of the graph
                document.getElementById("modelOptions").appendChild(mxUtils.button('View XML', function () {
                    var encoder = new mxCodec();
                    var node = encoder.encode(graph.getModel());
                    mxUtils.popup(mxUtils.getPrettyXml(node), true);
                }));

                // Reference to the transition checkbox
                var animate = document.getElementById('animate');

                // Reference to the Vertical checkbox
                var vertical = document.getElementById('vertical');

                // Creates a layout algorithm to be used
                // with the graph
                var layout = new mxCompactTreeLayout(graph);

                // Moves stuff wider apart than usual
                layout.forceConstant = 140;

                // Adds a button to execute the layout
                document.getElementById("modelOptions").appendChild(mxUtils.button('Arrange', function (evt) {
                    var parent = graph.getDefaultParent();
                    layout.execute(parent);
                    graph.getModel().beginUpdate();
                    try {
                        // Creates a layout algorithm to be used
                        // with the graph
                        var treeLayout = new mxCompactTreeLayout(graph);
                        // Moves stuff wider apart than usual
                        treeLayout.forceConstant = 140;
                        if (vertical.checked) {
                            treeLayout.horizontal = false
                        }
                        treeLayout.execute(parent);
                    } catch (e) {
                        throw e;
                    } finally {
                        if (animate.checked) {
                            var morph = new mxMorphing(graph);
                            morph.addListener(mxEvent.DONE, function () {
                                graph.getModel().endUpdate();
                            });

                            morph.startAnimation();
                        } else {
                            graph.getModel().endUpdate();
                        }
                    }
                }));
            }
        }

        function addToolbarItem(graph, toolbar, prototype, image) {
            // Function that is executed when the image is dropped on
            // the graph. The cell argument points to the cell under
            // the mousepointer if there is one.
            var funct = function (graph, evt, cell, x, y) {
                graph.stopEditing(false);

                var vertex = graph.getModel().cloneCell(prototype);
                vertex.geometry.x = x;
                vertex.geometry.y = y;

                graph.addCell(vertex);
                graph.setSelectionCell(vertex);
            }

            // Creates the image which is used as the drag icon (preview)
            var img = toolbar.addMode(null, image, function (evt, cell) {
                var pt = this.graph.getPointForEvent(evt);
                funct(graph, evt, cell, pt.x, pt.y);
            });

            // Disables dragging if element is disabled. This is a workaround
            // for wrong event order in IE. Following is a dummy listener that
            // is invoked as the last listener in IE.
            mxEvent.addListener(img, 'mousedown', function (evt) {
                // do nothing
            });

            // This listener is always called first before any other listener
            // in all browsers.
            mxEvent.addListener(img, 'mousedown', function (evt) {
                if (img.enabled == false) {
                    mxEvent.consume(evt);
                }
            });

            mxUtils.makeDraggable(img, graph, funct);

            return img;
        }
    </script>
</head>

<body onload="main(document.getElementById('graphContainer'))">

    <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 bg-white border-bottom">
        <h5 class="my-0 mr-md-auto font-weight-normal">EF-M Tool</h5>
        <nav class="my-2 my-md-0 mr-md-3">
            <a class="p-2 text-dark" data-toggle="modal" title="About" href="#aboutModal">About</a>
        </nav>
        <a class="btn btn-outline-primary" data-toggle="modal" title="Sign up" href="#signUpModal">Sign up</a>
    </div>
    <div class="container-fluid ">
        <div class="row">
            <!-- left sidebar -->
            <!--
        <div class="col-md-2 fixed pl-0 py-3 bg-light">
            <ul class="nav flex-md-column flex-nowrap justify-content-center">
                <li class="nav-item">
                    <a class="nav-link text-truncate" href="#">Top on mobile</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
            </ul>
        </div>
        -->
            <!-- center content -->
            <div class="col fluid d-flex flex-column p-0">
                <!-- main content -->
                <div id="graphContainer" class="flex-grow">

                </div>
                <!-- /main content -->

                <footer class="navbar navbar-expand bg-light navbar-light">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a href="#" class="nav-link">Footer</a></li>
                        <li class="nav-item"><a href="#" class="nav-link">Link</a></li>
                        <li class="nav-item"><a href="#" class="nav-link">Link</a></li>
                    </ul>
                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link page-scroll" data-toggle="modal" title="About"
                                href="#aboutModal">About</a>
                        </li>
                    </ul>
                </footer>

            </div>

            <!-- right sidebar -->
            <div class="col-md-2 fixed py-3 bg-light">
                <div id="properties" class="card card-body mb-4 border-0">
                    <h6>Properties</h6>
                    <div id="propertiesContainer"></div>
                </div>
                <div id="modelOptions" class="card card-body mb-4 border-0">
                    <h6>Model options</h6>
                    <input type="checkbox" id="animate" checked="checked" /> Transitions
                    <input type="checkbox" id="vertical" /> Vertical
                </div>
            </div>
        </div>
    </div>
    <div id="aboutModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">About</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                </div>
                <div class="modal-body">
                    <p>Just playing around, do not use for real work…</p>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div id="signUpModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Sign up</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                </div>
                <div class="modal-body">
                    <p>We are not yet open for business :(</p>
                    <p>Please come back later.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!--scripts loaded here-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</body>

</html>